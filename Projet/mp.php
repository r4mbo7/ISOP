<?php	session_start();	if(!isset($_SESSION['id'])){		header('Location: index.php');	}		try	{		$bdd = new PDO('mysql:host=localhost;dbname=membre', 'root', '');	}	catch (Exeption $e)	{		die('Erreur :' .$e->getMessage());	}		if(isset($_POST['id_mp'])){		$id_mp=$_POST['id_mp'];	$id_auteur=$_SESSION['id'];	$message=$_POST['reponse'];		$req=$bdd->prepare("INSERT INTO mp2(id_mp, id_auteur, message, date) VALUES(:id_mp, :id_auteur, :message, NOW())");	$req->execute(array(			'id_mp' => $id_mp,			'id_auteur' => $id_auteur,			'message' => $message			));				header("Location: Accueil.php?mp=" .$id_mp);	}		else{		$pseudo=$_POST['pseudo'];		$it=$bdd->query("SELECT id FROM membre WHERE pseudo='$pseudo'");	$rep=$it->fetch();		$id_destinataire=$rep['id'];	$id_auteur=$_SESSION['id'];	$objet=$_POST['objet'];	$message=$_POST['message'];		$ins=$bdd->prepare("INSERT INTO mp(id_auteur, id_destinataire, objet, date) VALUES(:id_auteur, :id_destinataire, :objet, NOW())");	$ins->execute(array(			'id_auteur' => $id_auteur,			'id_destinataire' => $id_destinataire,			'objet' => $objet			));		$it_mp=$bdd->query("SELECT id FROM mp ORDER BY id DESC");	$rep_mp=$it_mp->fetch();		$id_mp=$rep_mp['id'];		$req=$bdd->prepare("INSERT INTO mp2(id_mp, id_auteur, message, date) VALUES(:id_mp, :id_auteur, :message, NOW())");	$req->execute(array(			'id_mp' => $id_mp,			'id_auteur' => $id_auteur,			'message' => $message			));				header("Location: Accueil.php?mp=" .$id_mp);	}?>